(function(l){function b(a,d,b){if(!(a&&"length"in a))throw Error("Array does not exist or does not have length property!");this.f=a;this.b=d||[];this.c=b||[]}function f(a){c(a);this.a=a}function h(a){c(a);this.a=a}function k(a){c(a);this.a=a}function c(a){if("function"!==typeof a)throw Error("Invalid map function");}var g={};b.prototype.g=function(){for(var a=[],d=0,b=this.f.length;d<b;d++){for(var e=this.f[d],c=0,f=this.b.length;c<f&&(e=this.b[c].transform(e),e!=g);c++);e!==g&&a.push(e)}d=0;for(b=this.c.length;d<b;d++)a=this.c[d].transform(a);return a};b.prototype.forEach=function(a){for(var b=this.g(),c=0,e=b.length;c<e;c++)a(b[c])};b.prototype.count=function(){return this.g().length};b.prototype.map=function(a){this.b.push(new f(a));return this};f.prototype.transform=function(a){return this.a.call(a,a)};b.prototype.filter=function(a){this.b.push(new h(a));return this};h.prototype.transform=function(a){return this.a.call(a,a)?a:g};b.prototype.sort=function(a){this.c.push(new k(a));return this};k.prototype.transform=function(a){return a.sort(this.a)};b.prototype.clone=function(){return new b(this.f.slice(0),this.b.slice(0),this.c.slice(0))};l.Stream=b})(this);